@model ProjectFood.Models.User

@{
    ViewBag.Title = "Rediger butikker";
}

<div class="page-header">
    <h1>Rediger butikker</h1>
    <p class="lead">Her kan du ændre på, hvilke butikker, der <span class="text-danger">ikke</span> ønskes tilbud fra.</p>
</div>
<hr />
<div class="form-group">
    @using(Html.BeginForm("AddPreference", "User", FormMethod.Post)) {
        @Html.AntiForgeryToken()

        <div class="input-group input-group-lg">
            <input type="hidden" name="username" value="@User.Identity.Name" />
            <input type="hidden" name="store" value="true" />
            @Html.TextBox("pref", "", new { @id = "autocomplete", @placeholder = "indtast butik", @class = "form-control" })
            <span class="input-group-btn">
                <button type="submit" class="btn btn-default">Gem</button>
            </span>
        </div>
    }
</div>

<div class="form-group">
    @foreach(var store in ViewBag.Store) {
        
        <div class="form-group">
            <div class="col-md-2">
                <label>@store</label>                
            </div>
            <div class="lead" onclick="ToggleBool()">
                <input type="hidden" name="StoreCheck" id="StoreCheck@store" value="false" />
                <span id="check" class="glyphicon glyphicon-unchecked"></span>
            </div>
        </div>

    }
</div>

@section Scripts {                          @*  Don't question the JavaScript-Gods!!!                             *@
@Scripts.Render("~/bundles/homemade")   @*  Magic part that makes the buttons change if POST was succesfull   *@
@Scripts.Render("~/bundles/jqueryval")  @*  Magic part that makes the AJAX POST possible                      *@
}